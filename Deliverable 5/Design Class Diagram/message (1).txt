classDiagram
    direction TB
    
    %% ============================================
    %% VIEW LAYER (Presentation Layer)
    %% ============================================
    
    class RegistrationView {
        <<boundary>>
        +submitRegistrationDetails()
        +displayConfirmation()
        +displayError()
    }
    
    class VehicleEntryView {
        <<boundary>>
        +displayEntryStatus()
        +displayGarageFull()
        +displayInvalidVehicle()
        +displayEntryApproved()
    }
    
    class VehicleExitView {
        <<boundary>>
        +displayExitConfirmation()
        +displayFee()
    }
    
    class ParkingStatusView {
        <<boundary>>
        +requestLiveOccupancy()
        +displayLiveOccupancy()
        +displayParkingStatus()
    }
    
    class ServiceRequestView {
        <<boundary>>
        +initiateServiceRequest()
        +displayAvailableServices()
        +displayInvoice()
        +displayPaymentOptions()
        +displayResult()
    }
    
    class VehicleManagementView {
        <<boundary>>
        +displayPendingRegistrations()
        +displayUserDetails()
        +displayConfirmation()
    }
    
    class UserAccessView {
        <<boundary>>
        +submitAccessChange()
        +displayConfirmation()
    }
    
    class VehicleUpdateView {
        <<boundary>>
        +displayVehicleDetails()
        +submitVehicleUpdate()
        +displayUpdateConfirmation()
    }
    
    class SensorAlertView {
        <<boundary>>
        +displaySensorAlert()
        +displayErrorLogs()
    }
    
    class ReportView {
        <<boundary>>
        +requestUsageReport()
        +displayReport()
        +downloadReport()
    }
    
    class UserRegistrationView {
        <<boundary>>
        +submitRegistrationRequest()
        +displayRegistrationResult()
        +displayError()
    }
    
    %% ============================================
    %% CONTROLLER LAYER
    %% ============================================
    
    class RegistrationController {
        <<controller>>
        +handleRegistrationRequest()
        +handleConfirmation()
    }
    
    class VehicleEntryController {
        <<controller>>
        +handleLicensePlateScan()
        +handleEntryValidation()
    }
    
    class VehicleExitController {
        <<controller>>
        +handleVehicleExit()
        +handleExitConfirmation()
    }
    
    class ParkingStatusController {
        <<controller>>
        +handleLiveOccupancyRequest()
        +handleStatusUpdate()
    }
    
    class ServiceRequestController {
        <<controller>>
        +handleServiceRequest()
        +handleInvoiceGeneration()
        +handlePaymentProcessing()
    }
    
    class VehicleManagementController {
        <<controller>>
        +handleLogin()
        +handlePendingRegistrationsRequest()
        +handleUserAction()
    }
    
    class UserAccessController {
        <<controller>>
        +handleAccessChangeRequest()
        +handleAccessChangeConfirmation()
    }
    
    class VehicleUpdateController {
        <<controller>>
        +handleVehicleUpdateRequest()
        +handleUpdateConfirmation()
    }
    
    class SensorAlertController {
        <<controller>>
        +handleSensorAlert()
        +handleErrorLogRequest()
    }
    
    class ReportController {
        <<controller>>
        +handleUsageReportRequest()
        +handleReportGeneration()
    }
    
    class UserRegistrationController {
        <<controller>>
        +handleRegistrationRequest()
        +handleRegistrationResult()
    }
    
    %% ============================================
    %% SERVICE LAYER (Business Logic Layer)
    %% ============================================
    
    class RegistrationService {
        <<model>>
        +createUser()
        +createVehicle()
        +associateVehicle()
        +validateDetails()
        +confirmRegistration()
    }
    
    class VehicleEntryService {
        <<model>>
        +validateRegistration()
        +checkOccupancy()
        +openGate()
        +createEntryLog()
        +incrementOccupiedSpots()
    }
    
    class VehicleExitService {
        <<model>>
        +validateVehicle()
        +getParkingDuration()
        +processExit()
        +openExitGate()
        +updateSpotStatus()
        +calculateFee()
        +recordExit()
    }
    
    class ParkingStatusService {
        <<model>>
        +checkCurrentStatus()
        +aggregateData()
        +getAvailableSpots()
        +getOccupiedSpots()
        +countAvailableSlots()
        +countOccupiedSlots()
        +getParkingStatus()
        +isGarageAccessible()
        +checkAccessPermissions()
    }
    
    class ServiceRequestService {
        <<model>>
        +getSpotDetails()
        +getAvailableServicesForSpot()
        +createServiceRequest()
        +associateRequester()
        +associateVehicle()
        +generateInvoice()
        +processPayment()
        +updateRequestStatus()
    }
    
    class VehicleManagementService {
        <<model>>
        +validateCredentials()
        +getPendingRegistrations()
        +acceptUser()
        +rejectUser()
        +checkIfUrgentMember()
        +grantAccess()
        +forbidAccess()
    }
    
    class UserAccessService {
        <<model>>
        +findUser()
        +updateAccess()
        +validateAccess()
        +confirmAccessChange()
    }
    
    class VehicleUpdateService {
        <<model>>
        +getVehicleDetails()
        +validateVehicleOwnership()
        +validateUpdatedData()
        +updateVehicleDetails()
        +saveUpdatedVehicle()
    }
    
    class SensorAlertService {
        <<model>>
        +performSelfDiagnostics()
        +detectFault()
        +generateErrorAlert()
        +reportAlertToLogging()
        +receiveSensorErrorAlert()
        +assessErrorImpact()
        +initiateResponseActions()
        +notifyUniversityManager()
    }
    
    class ReportService {
        <<model>>
        +compileUsageReport()
        +generateReport()
        +saveReport()
    }
    
    class InvoiceService {
        <<model>>
        +generateInvoice()
        +calculateAmount()
    }
    
    class PaymentService {
        <<model>>
        +createPayment()
        +processPayment()
        +recordPaymentSuccess()
        +recordPaymentFailure()
    }
    
    class AuthenticationService {
        <<model>>
        +validateCredentials()
        +authenticateUser()
        +checkAccessPermissions()
    }
    
    class LoggingService {
        <<model>>
        +recordRegistration()
        +recordEntry()
        +recordExit()
        +recordAccessChange()
        +recordVehicleUpdate()
        +recordSensorErrorAlert()
        +recordPaymentSuccess()
        +recordPaymentFailure()
        +recordParkingStatusView()
        +getLogsByType()
        +provideErrorLogsForReport()
    }
    
    class ReportGenerator {
        <<model>>
        +generateReport()
    }
    
    class UserRegistrationService {
        <<model>>
        +registerUser()
        +validateInputData()
        +createUserAccount()
        +notifyUser()
    }
    
    %% ============================================
    %% DAO LAYER (Data Access Layer)
    %% ============================================
    
    class ParkingUserDAO {
        <<DAO>>
        +createUser()
        +findUser()
        +findUserByUniID()
        +updateUser()
        +updateAccessStatus()
        +getPendingRegistrations()
        +deleteUser()
    }
    
    class VehicleDAO {
        <<DAO>>
        +createVehicle()
        +findVehicle()
        +findVehicleByLicensePlate()
        +updateVehicle()
        +deleteVehicle()
        +validateVehicleOwnership()
        +getVehiclesByUser()
    }
    
    class ParkingGarageDAO {
        <<DAO>>
        +findGarage()
        +getAllGarages()
        +updateGarage()
        +getAvailableSpotCount()
        +getOccupiedSpotCount()
        +incrementOccupiedSpots()
        +decrementOccupiedSpots()
    }
    
    class ParkingSpotDAO {
        <<DAO>>
        +findSpot()
        +getAllSpots()
        +getAvailableSpots()
        +getOccupiedSpots()
        +updateSpotStatus()
        +getSpotsByGarage()
    }
    
    class OccupancySensorDAO {
        <<DAO>>
        +findSensor()
        +findSensorBySpot()
        +getAllSensors()
        +updateSensorStatus()
        +detectOccupancy()
        +getOccupancyState()
    }
    
    class EntryGateDAO {
        <<DAO>>
        +findGate()
        +openGate()
        +closeGate()
        +getGateStatus()
    }
    
    class ExitGateDAO {
        <<DAO>>
        +findGate()
        +openGate()
        +closeGate()
        +getGateStatus()
    }
    
    class GateSensorDAO {
        <<DAO>>
        +findSensor()
        +scanLicensePlate()
        +detectGateError()
        +getGateStatus()
    }
    
    class SensorDAO {
        <<DAO>>
        +findSensor()
        +getAllSensors()
        +updateSensorStatus()
    }
    
    class ServiceRequestDAO {
        <<DAO>>
        +createRequest()
        +findRequest()
        +updateRequestStatus()
        +getRequestsByUser()
        +getRequestsBySpot()
    }
    
    class ServiceTypeDAO {
        <<DAO>>
        +findServiceType()
        +getAllServiceTypes()
        +getAvailableServicesForSpot()
    }
    
    class InvoiceDAO {
        <<DAO>>
        +createInvoice()
        +findInvoice()
        +updateInvoice()
        +getInvoicesByRequest()
    }
    
    class PaymentDAO {
        <<DAO>>
        +createPayment()
        +findPayment()
        +updatePaymentStatus()
        +getPaymentsByRequest()
    }
    
    class PaymentMethodDAO {
        <<DAO>>
        +findPaymentMethod()
        +processPayment()
        +validatePaymentMethod()
    }
    
    class GarageAdminDAO {
        <<DAO>>
        +findAdmin()
        +findAdminByUniID()
        +validateCredentials()
        +updateAdmin()
    }
    
    class UniversityManagerDAO {
        <<DAO>>
        +findManager()
        +findManagerByUniID()
        +updateManager()
    }
    
    class LoggingDAO {
        <<DAO>>
        +createLog()
        +findLog()
        +getLogsByType()
        +getLogsByDateRange()
        +getErrorLogs()
    }
    
    class LogsDAO {
        <<DAO>>
        +saveReport()
        +findReport()
        +getAllReports()
    }
    
    class EntryExitRepository {
        <<DAO>>
        +getEntryExitLogs()
        +createEntryLog()
        +createExitLog()
    }
    
    class ServiceLogRepository {
        <<DAO>>
        +getServiceLogs()
        +createServiceLog()
    }
    
    %% ============================================
    %% ENTITY LAYER (Domain Model Layer)
    %% ============================================
    
    class ParkingUser {
        <<Entity>>
        -String userID
        -String uniID
        -String name
        -String email
        -String phone
        -String role
        -Boolean accessStatus
        -RegistrationStatus registrationStatus
        -Boolean isUrgentMember
        +getUserID() String
        +getUniID() String
        +getRole() String
        +setRole(String)
        +updateAccess(Boolean) Boolean
        +confirmUpdate() Boolean
        +getVehicles() List~Vehicle~
        +addVehicle(Vehicle)
    }
    
    class Vehicle {
        <<Entity>>
        -String vehicleID
        -String licensePlate
        -String model
        -String color
        -Boolean accessStatus
        +getVehicleID() String
        +getLicensePlate() String
        +updateDetails(Map) Boolean
        +associateVehicle() Boolean
    }
    
    class ParkingGarage {
        <<Entity>>
        -String garageID
        -Boolean garageAccess
        -int availableSpotCount
        -int totalSpots
        +getGarageID() String
        +countAvailableSlots() int
        +countOccupiedSlots() int
        +getAvailableSpots() List~ParkingSpot~
        +getOccupiedSpots() List~ParkingSpot~
        +getParkingStatus() ParkingStatus
        +isGarageAccessible() Boolean
    }
    
    class ParkingSpot {
        <<Entity>>
        -String spotID
        -SpotStatus status
        +getSpotID() String
        +getOccupancyStatus() SpotStatus
        +updateStatus(SpotStatus) Boolean
        +getOccupancySensor() OccupancySensor
    }
    
    class OccupancySensor {
        <<Entity>>
        -String spotID
        -Boolean isOccupied
        +detectOccupancy() Boolean
        +getOccupancyState() Boolean
        +updateOccupancyStatus(Boolean) Boolean
        +notifyParkingSpotOnStatusChange() Boolean
        +detectOccupancyError() Boolean
        +generateOccupancyErrorAlert() SensorAlert
        +transmitAlert(SensorAlert) Boolean
    }
    
    class Sensor {
        <<Entity>>
        -String sensorID
        +getSensorID() String
        +performSelfDiagnostics() DiagnosticResult
        +detectFault() FaultResult
        +generateErrorAlert(String) SensorAlert
        +reportAlertToLogging(SensorAlert) Boolean
    }
    
    class GateSensor {
        <<Entity>>
        -String gateID
        +scanAndSendLicensePlate() String
        +monitorGateStatus() GateStatus
        +detectGateError() Boolean
        +generateGateErrorAlert() SensorAlert
        +forwardAlert(SensorAlert) Boolean
    }
    
    class EntryGate {
        <<Entity>>
        -String gateID
        -GateStatus status
        +openGate() Boolean
        +closeGate() Boolean
        +confirmGateOpened() Boolean
        +getGateStatus() GateStatus
    }
    
    class ExitGate {
        <<Entity>>
        -String gateID
        -GateStatus status
        +openGate() Boolean
        +closeGate() Boolean
        +getGateStatus() GateStatus
    }
    
    class ServiceRequest {
        <<Entity>>
        -String requestID
        -RequestStatus status
        -Date date
        -Time time
        +getRequestID() String
        +updateStatus(RequestStatus) Boolean
        +associateRequester(String) Boolean
        +associateVehicle(String) Boolean
    }
    
    class ServiceType {
        <<Entity>>
        -String serviceID
        -String serviceName
        -String description
        -Double price
        +getServiceID() String
        +getServiceName() String
        +getPrice() Double
    }
    
    class Invoice {
        <<Entity>>
        -String invoiceID
        -Double amount
        -Date date
        -Time time
        -InvoiceStatus status
        +getInvoiceID() String
        +getAmount() Double
        +updateStatus(InvoiceStatus) Boolean
        +getPayments() List~Payment~
        +addPayment(Payment)
    }
    
    class Payment {
        <<Entity>>
        -String paymentID
        -Double amount
        -Date date
        -Time time
        -PaymentStatus status
        +getPaymentID() String
        +processPayment() PaymentResult
        +updateStatus(PaymentStatus) Boolean
        +paymentSuccess() Boolean
        +paymentFailed(String) Boolean
    }
    
    class PaymentMethod {
        <<Entity>>
        -String methodID
        -String methodType
        -Map details
        +processPayment(Double) PaymentResult
        +validateMethod() Boolean
    }
    
    class GarageAdmin {
        <<Entity>>
        -String uniID
        -String name
        -String phone
        -String adminID
        +receiveSensorErrorAlert(SensorAlert) Boolean
        +assessErrorImpact(SensorAlert) ImpactAssessment
        +initiateResponseActions(SensorAlert) Boolean
        +notifyUniversityManager(SensorAlert) Boolean
    }
    
    class UniversityManager {
        <<Entity>>
        -String uniID
        -String name
        -String phone
        -String managerID
        +receiveSystemWideAlert(SensorAlert) Boolean
        +manageGarageAccess(String, Boolean) Boolean
        +reviewAlertPatterns() List~AlertPattern~
        +authorizeEscalationActions(String) Boolean
    }
    
    class Log {
        <<Entity>>
        -String logID
        -String userID
        -String vehicleID
        -String actionType
        -Date date
        -Time time
        -String details
        -String type
        +getLogID() String
        +getActionType() String
        +getDetails() String
    }
    
    class EntryExitLog {
        <<Entity>>
        -String logID
        -String licensePlate
        -Date timestamp
        -String type
        -Double fee
        +getLogID() String
        +getTimestamp() Date
    }
    
    class ServiceLog {
        <<Entity>>
        -String logID
        -String requestID
        -String serviceID
        -Date timestamp
        -String status
        +getLogID() String
        +getTimestamp() Date
    }
    
    class ErrorLog {
        <<Entity>>
        -String logID
        -String sensorID
        -String errorType
        -Date date
        -Time time
        -String details
        +getLogID() String
        +getErrorType() String
    }
    
    class UsageReport {
        <<Entity>>
        -String reportID
        -Date startDate
        -Date endDate
        -List entryExitLogs
        -List serviceLogs
        -String format
        +getReportID() String
        +generateReport() Document
    }
    
    class SensorAlert {
        <<Entity>>
        -String alertID
        -String sensorID
        -String errorType
        -Date timestamp
        -String severity
        -String details
        +getAlertID() String
        +getErrorType() String
        +getSeverity() String
    }
    
    class ParkingStatus {
        <<Entity>>
        -String garageID
        -int availableSpots
        -int occupiedSpots
        -int totalSpots
        -Date timestamp
        +getAvailableSpots() int
        +getOccupiedSpots() int
        +getTotalSpots() int
    }
    
    class OccupancyData {
        <<Entity>>
        -String spotID
        -Boolean isOccupied
        -Date timestamp
        +getSpotID() String
        +isOccupied() Boolean
    }
    
    %% Enumerations
    class SpotStatus {
        <<enumeration>>
        FREE
        OCCUPIED
        RESERVED
        MAINTENANCE
    }
    
    class GateStatus {
        <<enumeration>>
        OPEN
        CLOSED
        MAINTENANCE
        ERROR
    }
    
    class RegistrationStatus {
        <<enumeration>>
        PENDING
        APPROVED
        REJECTED
        EXPIRED
    }
    
    class RequestStatus {
        <<enumeration>>
        PENDING
        PAID
        COMPLETED
        PAYMENT_FAILED
        CANCELLED
    }
    
    class PaymentStatus {
        <<enumeration>>
        PROCESSING
        SUCCESS
        FAILED
        REFUNDED
    }
    
    class InvoiceStatus {
        <<enumeration>>
        PENDING
        PAID
        OVERDUE
        CANCELLED
    }
    
    class SensorStatus {
        <<enumeration>>
        ACTIVE
        INACTIVE
        ERROR
        MAINTENANCE
    }
    
    %% DTO Layer
    class PersonalDetails {
        <<DTO>>
        -String uniID
        -String name
        -String email
        -String phone
    }
    
    class VehicleDetails {
        <<DTO>>
        -String licensePlate
        -String model
        -String color
    }
    
    class Credentials {
        <<DTO>>
        -String userID
        -String password
    }
    
    %% ============================================
    %% RELATIONSHIPS - VIEW TO CONTROLLER
    %% ============================================
    RegistrationView --> RegistrationController
    VehicleEntryView --> VehicleEntryController
    VehicleExitView --> VehicleExitController
    ParkingStatusView --> ParkingStatusController
    ServiceRequestView --> ServiceRequestController
    VehicleManagementView --> VehicleManagementController
    UserAccessView --> UserAccessController
    VehicleUpdateView --> VehicleUpdateController
    SensorAlertView --> SensorAlertController
    ReportView --> ReportController
    UserRegistrationView --> UserRegistrationController
    
    %% ============================================
    %% RELATIONSHIPS - CONTROLLER TO SERVICE
    %% ============================================
    RegistrationController --> RegistrationService
    VehicleEntryController --> VehicleEntryService
    VehicleExitController --> VehicleExitService
    ParkingStatusController --> ParkingStatusService
    ServiceRequestController --> ServiceRequestService
    VehicleManagementController --> VehicleManagementService
    UserAccessController --> UserAccessService
    VehicleUpdateController --> VehicleUpdateService
    SensorAlertController --> SensorAlertService
    ReportController --> ReportService
    UserRegistrationController --> UserRegistrationService
    
    %% ============================================
    %% RELATIONSHIPS - SERVICE TO DAO
    %% ============================================
    RegistrationService --> ParkingUserDAO
    RegistrationService --> VehicleDAO
    RegistrationService --> LoggingService
    VehicleEntryService --> VehicleDAO
    VehicleEntryService --> ParkingGarageDAO
    VehicleEntryService --> OccupancySensorDAO
    VehicleEntryService --> EntryGateDAO
    VehicleEntryService --> LoggingService
    VehicleExitService --> VehicleDAO
    VehicleExitService --> ParkingGarageDAO
    VehicleExitService --> ExitGateDAO
    VehicleExitService --> OccupancySensorDAO
    VehicleExitService --> LoggingService
    ParkingStatusService --> ParkingGarageDAO
    ParkingStatusService --> ParkingSpotDAO
    ParkingStatusService --> OccupancySensorDAO
    ParkingStatusService --> LoggingService
    ServiceRequestService --> ServiceRequestDAO
    ServiceRequestService --> ParkingSpotDAO
    ServiceRequestService --> ServiceTypeDAO
    ServiceRequestService --> ParkingUserDAO
    ServiceRequestService --> VehicleDAO
    ServiceRequestService --> InvoiceService
    ServiceRequestService --> PaymentService
    ServiceRequestService --> LoggingService
    VehicleManagementService --> ParkingUserDAO
    VehicleManagementService --> VehicleDAO
    VehicleManagementService --> AuthenticationService
    VehicleManagementService --> LoggingService
    UserAccessService --> ParkingUserDAO
    UserAccessService --> LoggingService
    VehicleUpdateService --> VehicleDAO
    VehicleUpdateService --> ParkingUserDAO
    VehicleUpdateService --> AuthenticationService
    VehicleUpdateService --> LoggingService
    SensorAlertService --> SensorDAO
    SensorAlertService --> OccupancySensorDAO
    SensorAlertService --> GateSensorDAO
    SensorAlertService --> LoggingService
    SensorAlertService --> GarageAdminDAO
    ReportService --> EntryExitRepository
    ReportService --> ServiceLogRepository
    ReportService --> ReportGenerator
    ReportService --> LogsDAO
    InvoiceService --> InvoiceDAO
    PaymentService --> PaymentDAO
    PaymentService --> PaymentMethodDAO
    PaymentService --> InvoiceDAO
    PaymentService --> LoggingService
    AuthenticationService --> ParkingUserDAO
    AuthenticationService --> GarageAdminDAO
    LoggingService --> LoggingDAO
    UserRegistrationService --> ParkingUserDAO
    UserRegistrationService --> LoggingService
    
    %% ============================================
    %% RELATIONSHIPS - SERVICE TO SERVICE
    %% ============================================
    ServiceRequestService --> InvoiceService
    ServiceRequestService --> PaymentService
    VehicleManagementService --> AuthenticationService
    VehicleUpdateService --> AuthenticationService
    
    %% ============================================
    %% RELATIONSHIPS - INHERITANCE
    %% ============================================
    OccupancySensor --|> Sensor
    GateSensor --|> Sensor
    
    %% ============================================
    %% RELATIONSHIPS - ENTITY ASSOCIATIONS
    %% ============================================
    ParkingUser *-- Vehicle
    ParkingGarage *-- ParkingSpot
    ParkingSpot -- OccupancySensor
    ServiceRequest -- ServiceType
    ServiceRequest -- ParkingSpot
    ServiceRequest -- ParkingUser
    ServiceRequest -- Vehicle
    ServiceRequest ..> Invoice
    Invoice *-- Payment
    Payment -- PaymentMethod
    
    %% ============================================
    %% RELATIONSHIPS - DAO TO ENTITY
    %% ============================================
    ParkingUserDAO ..> ParkingUser
    VehicleDAO ..> Vehicle
    ParkingGarageDAO ..> ParkingGarage
    ParkingSpotDAO ..> ParkingSpot
    OccupancySensorDAO ..> OccupancySensor
    EntryGateDAO ..> EntryGate
    ExitGateDAO ..> ExitGate
    GateSensorDAO ..> GateSensor
    SensorDAO ..> Sensor
    ServiceRequestDAO ..> ServiceRequest
    ServiceTypeDAO ..> ServiceType
    InvoiceDAO ..> Invoice
    PaymentDAO ..> Payment
    PaymentMethodDAO ..> PaymentMethod
    GarageAdminDAO ..> GarageAdmin
    UniversityManagerDAO ..> UniversityManager
    LoggingDAO ..> Log
    LoggingDAO ..> ErrorLog
    EntryExitRepository ..> EntryExitLog
    ServiceLogRepository ..> ServiceLog
    LogsDAO ..> UsageReport

